# Story 1.1: Project Setup and Electron Foundation

## Status
Ready for Review

## Story
**As a** developer,  
**I want** to establish the foundational Electron project structure with TypeScript configuration,  
**so that** I have a properly configured development environment to build the MaxSort application with main process, renderer, and build tooling.

## Acceptance Criteria
1. Create Electron project with main process (Node.js) and renderer process (React + TypeScript)
2. Configure electron-builder for macOS DMG packaging and code signing preparation
3. Implement basic project structure following recommended layout from architecture docs
4. Set up development scripts for build, dev, and packaging
5. Verify app launches and displays a basic "Hello MaxSort" window
6. Configure TypeScript with proper tsconfig for both main and renderer processes

## Tasks / Subtasks
- [x] Task 1: Initialize project structure (AC: 1, 3)
  - [x] Create `/app` directory with recommended subdirectory structure
  - [x] Set up `/app/src/main`, `/app/src/renderer`, `/app/src/lib` directories
  - [x] Create `/tests/unit`, `/tests/integration` directories
  - [x] Initialize package.json with Electron and TypeScript dependencies
- [x] Task 2: Configure Electron main process (AC: 1, 6)
  - [x] Create main.ts in `/app/src/main` with basic window creation
  - [x] Configure TypeScript for main process (Node.js environment)
  - [x] Set up basic IPC channel structure for future use
- [x] Task 3: Configure renderer process (AC: 1, 6)
  - [x] Set up React + TypeScript in `/app/src/renderer`
  - [x] Create basic App component with "Hello MaxSort" content
  - [x] Configure TypeScript for renderer process (DOM environment)
  - [x] Set up bundling configuration (webpack/vite as needed)
- [x] Task 4: Configure build tooling (AC: 2, 4)
  - [x] Configure electron-builder.yml for macOS DMG packaging
  - [x] Set up development scripts in package.json (dev, build, dist)
  - [x] Configure code signing preparation (placeholder certificates)
- [x] Task 5: Testing and verification (AC: 5)
  - [x] Add basic unit test structure using recommended testing framework
  - [x] Verify app launches in development mode
  - [x] Verify basic build process completes successfully
  - [x] Test DMG package creation (unsigned for now)

## Dev Notes

### Previous Story Insights
This is the first story - no previous context available.

### Project Structure
[Source: architecture/dev-repo-layout-recommended.md]
Required directory structure:
```
/app
  /src
    /renderer   # React UI
    /main       # Electron main process
    /workers    # Node worker code (for future stories)
    /agents     # Agent manager, task queue (for future stories)
    /lib        # utils (fs, system-monitor, ollama-client)
  /native       # native addon sources (optional)
  /scripts      # build / packaging scripts
  /resources
  package.json
  electron-builder.yml
/tests
  /unit
  /integration
/docs
  architecture.md
  prd.md
```

### System Components for MVP Foundation
[Source: architecture/system-components-logical.md]
- **Renderer (Electron UI)**: React + TypeScript UI - keep lightweight, delegate heavy work to main
- **Main process (Electron / Node)**: Application backend handling task orchestration, IPC endpoints
- **Communication**: Secure IPC channels using `ipcRenderer` between processes

### Build and Packaging Requirements
[Source: architecture/packaging-distribution-macos-specifics.md]
- Use `electron-builder` for DMG and notarized packages
- Sign main app and helper executables
- MVP: avoid Python sidecar initially to simplify notarization

### Testing Standards
[Source: architecture/testing-strategy.md]
- Unit tests should be created for core logic
- Focus on testing main process logic and IPC communications
- Test files should be placed in `/tests/unit` and `/tests/integration`
- Multi-arch testing consideration for Intel (x64) and Apple Silicon (arm64) macOS

### Technical Constraints
- TypeScript configuration required for both main and renderer processes
- Secure IPC channel setup for future agent communication
- macOS-specific packaging with electron-builder
- No specific version requirements found in architecture docs

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-08-29 | 1.0 | Initial story creation | Bob (Scrum Master) |
| 2025-08-29 | 1.1 | Story implementation completed | James (Full Stack Developer) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
Claude 3.5 Sonnet (via VS Code GitHub Copilot)

### Debug Log References
- Build verification: All TypeScript compilation successful
- App launch test: Electron app starts successfully 
- Unit tests: vitest framework configured and running
- Package creation: electron-builder DMG creation working (unsigned)
- All acceptance criteria verified successfully

### Completion Notes List
- Project structure created according to architecture specs
- Electron main process configured with basic window creation and IPC setup
- React + TypeScript renderer process with "Hello MaxSort" UI
- Build tooling configured with electron-builder for macOS DMG packaging
- Development environment verified with successful app launch and build
- Unit testing framework (vitest) integrated and working
- All tasks completed and tested successfully

### File List
- `/app/package.json` - Main package configuration with dependencies and scripts
- `/app/electron-builder.yml` - Build configuration for macOS DMG packaging
- `/app/tsconfig.main.json` - TypeScript config for main process
- `/app/tsconfig.preload.json` - TypeScript config for preload script
- `/app/tsconfig.renderer.json` - TypeScript config for renderer process
- `/app/vite.config.ts` - Vite bundling configuration
- `/app/vitest.config.ts` - Testing framework configuration
- `/app/src/main/main.ts` - Electron main process implementation
- `/app/src/preload/preload.ts` - IPC preload script
- `/app/src/renderer/App.tsx` - Main React component
- `/app/src/renderer/App.css` - UI styling
- `/app/src/renderer/main.tsx` - React entry point
- `/app/index.html` - HTML template for renderer
- `/app/scripts/notarize.js` - Code signing/notarization script
- `/app/resources/entitlements.mac.plist` - macOS entitlements
- `/app/resources/icon.icns` - App icon (placeholder)
- `/app/resources/dmg-background.png` - DMG background (placeholder)
- `/app/src/app.test.ts` - Unit tests
- Project directories: `/app/src/{main,renderer,preload,lib,workers,agents}`, `/tests/{unit,integration}`

## QA Results
*Results from QA Agent review will be populated here after implementation*
